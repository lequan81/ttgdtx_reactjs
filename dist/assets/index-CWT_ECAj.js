import{r as g,j as e}from"./index-JlrcVpDR.js";import{B as V}from"./index-BudeqGMA.js";import{I as m,E,a as w,T as t}from"./validate-BvF-d9_t.js";import{d as o}from"./data-C-Mmsf6e.js";import{C as b}from"./CheckCircleIcon-aAZO1Uum.js";const k="https://tar-ionized-ground.glitch.me/signUpData",j=async r=>{try{return(await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,createdAt:new Date().toISOString()})})).status}catch{return-1}};function C(){const[r,a]=g.useState({fullnameErr:{isValid:!0,message:""},emailErr:{isValid:!0,message:""},addressErr:{isValid:!0,message:""},phoneErr:{isValid:!0,message:""},lessonErr:{isValid:!0,message:""},isDone:!1}),[s,i]=g.useState({loading:!1,success:!1,show:!0}),[u,f]=g.useState({fullname:"",email:"",address:"",phone:"",lesson:o.signUp[0].subjects[0].value||"",isDone:!1}),d=l=>{f(n=>({...n,[l.target.name]:l.target.value})),a(n=>({...n,[`${l.target.name}Err`]:{isValid:!0,message:""}}))},c=l=>{switch(l){case 0:{a({fullnameErr:{isValid:!0,message:""},emailErr:{isValid:!0,message:""},addressErr:{isValid:!0,message:""},phoneErr:{isValid:!0,message:""},lessonErr:{isValid:!0,message:""}});break}case-1:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!1,message:"Họ và Tên không hợp lệ. Vui lòng thử lại"},emailErr:{isValid:!1,message:"Email không hợp lệ. Vui lòng thử lại"},addressErr:{isValid:!1,message:"Vui lòng nhập địa chỉ"},phoneErr:{isValid:!1,message:`Số điện thoại không hợp lệ.
 Vui lòng thử lại`},lessonErr:{isValid:!1,message:"Vui lòng chọn khóa học"}}),t("error","Có lỗi xảy ra. Vui lòng thử lại");break}case-2:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!1,message:"Họ và Tên không hợp lệ. Vui lòng thử lại"},emailErr:{isValid:!0,message:""},addressErr:{isValid:!0,message:""},phoneErr:{isValid:!0,message:""},lessonErr:{isValid:!0,message:""}}),t("warning","Vui lòng nhập lại Họ và Tên");break}case-3:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!0,message:"Họ và tên hợp lệ"},emailErr:{isValid:!1,message:"Email không hợp lệ. Vui lòng thử lại"},addressErr:{isValid:!0,message:""},phoneErr:{isValid:!0,message:""},lessonErr:{isValid:!0,message:""}}),t("warning","Vui lòng nhập lại email");break}case-4:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!0,message:"Họ và tên hợp lệ"},emailErr:{isValid:!0,message:"Email hợp lệ"},addressErr:{isValid:!1,message:"Vui lòng nhập địa chỉ"},phoneErr:{isValid:!0,message:""},lessonErr:{isValid:!0,message:""}}),t("warning","Vui lòng nhập địa chỉ");break}case-5:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!0,message:"Họ và tên hợp lệ"},emailErr:{isValid:!0,message:"Email hợp lệ"},addressErr:{isValid:!0,message:"Địa chỉ hợp lệ"},phoneErr:{isValid:!1,message:`Số điện thoại không hợp lệ.
 Vui lòng thử lại`},lessonErr:{isValid:!0,message:""}}),t("warning","Vui lòng nhập lại số điện thoại");break}case-6:{i({loading:!1,success:!1,show:!0}),a({fullnameErr:{isValid:!0,message:"Họ và tên hợp lệ"},emailErr:{isValid:!0,message:"Email hợp lệ"},addressErr:{isValid:!0,message:"Địa chỉ hợp lệ"},phoneErr:{isValid:!0,message:"Số điện thoại hợp lệ"},lessonErr:{isValid:!1,message:"Vui lòng chọn khóa học"}}),t("warning","Vui lòng chọn khóa học");break}}},h=l=>{switch(l){case"loading":{i({loading:!0,success:!1,show:!0});break}case"success":{i({loading:!1,success:!0,show:!1});break}case"error":{f({fullname:"",email:"",address:"",phone:"",lesson:o.signUp[0].subjects[0].value||"",isDone:!1}),setTimeout(()=>{i({loading:!1,success:!1,show:!1})},300),setTimeout(()=>{i({loading:!1,success:!1,show:!0})},5e3);break}}},x=async l=>{l.preventDefault(),c(0),h("loading");let n=w(u);if(typeof n=="number"&&n<=0)c(n);else{c(0),t("info","Vui lòng đợi...");let p=await j(u);typeof p=="number"&&p<=0?(h("error"),t("error","Lỗi kết nối tới server"),setTimeout(()=>{t("info","Vui lòng kiểm tra kết nối Internet và thử lại")},1500)):(t("success","Đã đăng ký thành công"),h("success"))}};return e.jsxs("section",{className:"flex flex-col flex-grow h-full items-center justify-start bg-gray-100 dark:bg-gray-900 w-full mt-12",children:[e.jsxs("div",{className:"flex items-center justify-center flex-col",children:[e.jsx("h1",{className:"text-center text-blue-600 dark:text-white sm:text-xl lg:text-lg md:text-base uppercase font-bold mb-2 mt-4 whitespace-pre-line sm:whitespace-normal animate__animated animate__zoomIn animate__faster",children:o.signUp[0].title}),e.jsx("p",{className:"antialiased hover:subpixel-antialiased text-center leading-relaxed sm:text-lg text-sm text-gray-800 dark:text-gray-200 animate__animated animate__fadeIn animate__slow",children:s.success===!1&&s.show===!0&&o.signUp[0].subTitle})]}),s.show===!0?e.jsxs("form",{onSubmit:x,className:"animate__animated animate__zoomIn animate__fast shadow-md transition-shadow shadow-gray-300 dark:shadow-none sm:rounded px-8 mx-auto mt-8 sm:mb-8 sm:py-8 py-4 mb-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-none flex flex-col w-full max-w-4xl",children:[e.jsxs("div",{"data-nosnippet":!0,className:"sm:flex mb-4",children:[e.jsx("div",{className:"sm:w-5/12 px-3",children:e.jsx(m,{isLoading:s.loading,id:"fullname",title:"Họ và Tên",isRequired:!0,isSelected:!1,type:"text",placeholder:"Nguyễn Thị D",handleChange:d,status:r.fullnameErr})}),e.jsx("div",{className:"sm:w-7/12 px-3",children:e.jsx(m,{isLoading:s.loading,id:"address",title:"Địa chỉ",isRequired:!0,isSelected:!1,type:"text",placeholder:"Quận 2, TP Hồ Chí Minh",handleChange:d,status:r.addressErr})})]}),e.jsxs("div",{"data-nosnippetclassName":"sm:flex mb-4",children:[e.jsx("div",{className:"sm:w-5/12 px-3",children:e.jsx(m,{isLoading:s.loading,id:"email",title:"Email",isRequired:!0,isSelected:!1,type:"text",placeholder:"demo@email.com",handleChange:d,status:r.emailErr})}),e.jsx("div",{className:"sm:w-3/12 px-3",children:e.jsx(m,{isLoading:s.loading,id:"phone",title:"Số điện thoại",isRequired:!0,isSelected:!1,type:"text",placeholder:"09890123456",handleChange:d,status:r.phoneErr})}),e.jsx("div",{className:"sm:w-4/12 px-3",children:e.jsx(m,{isLoading:s.loading,id:"lesson",title:"Khóa học đăng ký",isRequired:!0,isSelected:!0,selectList:o.signUp[0].subjects,value:u.lesson,handleChange:d,status:r.lessonErr})})]}),e.jsx("div",{"data-nosnippetclassName":"flex items-center px-3 mt-2",children:e.jsx(V,{type:"submit",isLoading:s.loading,title:"Đăng ký thông tin"})})]}):e.jsx("div",{className:"animate__animated animate__zoomIn animate__fast flex items-center mt-6 text-center border sm:rounded-lg h-fit sm:w-full w-3/4 mx-auto sm:mx-0 max-w-md dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col w-full px-4 sm:py-8 py-4 mx-auto",children:[e.jsx("div",{className:`p-1 sm:p-2 mx-auto rounded-full dark:bg-gray-800 ${s.success?"text-green-500 bg-green-100":"text-red-500 bg-red-100"}`,children:s.success?e.jsx(b,{strokeWidth:2,fill:"none",stroke:"currentColor",className:"sm:w-8 sm:h-8 w-7 h-7"}):e.jsx(E,{strokeWidth:2,fill:"none",stroke:"currentColor",className:"sm:w-8 sm:h-8 w-7 h-7"})}),e.jsx("h1",{className:"mt-3 sm:text-lg text-base font-medium sm:font-normal text-gray-800 dark:text-white",children:s.success?"Đã đăng ký thành công":"Có lỗi xảy ra"}),e.jsx("p",{className:"antialiased hover:subpixel-antialiased mt-2 text-sm sm:text-base text-gray-500 dark:text-gray-400 whitespace-pre-line",children:s.success?`Cảm ơn bạn đã tin tưởng chúng tôi! 
 Chúng tôi sẽ thông báo tới bạn sớm nhất có thể`:"Xin vui lòng đợi và thử lại"})]})})]})}export{C as default};
