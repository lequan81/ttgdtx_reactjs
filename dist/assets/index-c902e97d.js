import{g as L,R as n,r as h,j as s,a as T,b as B}from"./index-507f46d4.js";import{g as P,r as W}from"./index-bea7bad4.js";import{B as U}from"./index-4fc07404.js";import{A as V}from"./ArrowLeftIcon-cbf80ef5.js";function y(t){return t.children!==void 0}function S(t){return t.text!==void 0}function K(t){var r=t.children;if(r.length>1){var e=r.filter(function a(i){return S(i)&&i.text!==""?!0:y(i)?(i.children=i.children.filter(a)).length:!1});return!(e.length>0)}else if(r[0].text==="")return!0;return!1}var k;(function(t){t[t["heading-one"]=0]="heading-one",t[t["heading-two"]=1]="heading-two",t[t["heading-three"]=2]="heading-three",t[t["heading-four"]=3]="heading-four",t[t["heading-five"]=4]="heading-five",t[t["heading-six"]=5]="heading-six",t[t.table_head=6]="table_head"})(k||(k={}));var M={"heading-one":"h1","heading-two":"h2","heading-three":"h3","heading-four":"h4","heading-five":"h5","heading-six":"h6",class:"class",link:"a",image:"img",iframe:"iframe",video:"video","bulleted-list":"ul","numbered-list":"ol","list-item":"li","list-item-child":"list_item_child",table:"table",table_head:"table_head",table_body:"table_body",table_row:"table_row",table_cell:"table_cell",table_header_cell:"table_header_cell","block-quote":"blockquote",paragraph:"p",bold:"bold",italic:"italic",underline:"underline",code:"code","code-block":"code_block"};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var R=/["'&<>]/,Y=Q;function Q(t){var r=""+t,e=R.exec(r);if(!e)return r;var a,i="",c=0,l=0;for(c=e.index;c<r.length;c++){switch(r.charCodeAt(c)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}l!==c&&(i+=r.substring(l,c)),l=c+1,i+=a}return l!==c?i+r.substring(l,c):i}const p=L(Y);function g(){return g=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},g.apply(this,arguments)}function q(t,r){if(t==null)return{};var e={},a=Object.keys(t),i,c;for(c=0;c<a.length;c++)i=a[c],!(r.indexOf(i)>=0)&&(e[i]=t[i]);return e}function X(t){var r=t.url;return n.createElement("audio",{style:{display:"block",maxWidth:"100%",height:"auto"},src:r,controls:!0},n.createElement("p",null,"Your browser doesn't support HTML5 audio. Here is a"," ",n.createElement("a",{href:r},"link to the audio")," instead."))}function G(t){var r=t.url;return n.createElement("div",{style:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"}},n.createElement("iframe",{style:{position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",height:"100%"},src:p(r),loading:"lazy",allow:"fullscreen",frameBorder:"0",referrerPolicy:"no-referrer"}))}function F(t){var r=t.src,e=t.width,a=t.height,i=t.altText,c=t.title,l=e&&e>0,u=a&&a>0;return n.createElement("img",Object.assign({loading:"lazy",src:p(r)},l&&{width:e},u&&{height:a},{alt:i,title:c}))}function O(t){var r=t.src,e=t.width,a=t.height,i=t.title;return n.createElement("video",{src:p(r),controls:!0,width:e||"100%",height:a||"100%",title:i},n.createElement("p",null,"Your browser doesn't support HTML5 video. Here is a"," ",n.createElement("a",{href:r},"link to the video")," instead."))}function J(t){var r=t.className,e=t.children;return n.createElement("div",{className:r},e)}function Z(t){var r=t.children,e=q(t,["children"]),a=e.href,i=e.rel,c=e.id,l=e.title,u=e.openInNewTab,d=e.className,o={};return i&&(o.rel=i),c&&(o.id=c),l&&(o.title=l),d&&(o.className=d),u&&(o.target="_blank"),n.createElement("a",Object.assign({href:p(a)},o),r)}function b(t){return t.mimeType,n.createElement(h.Fragment,null)}var w={a:Z,class:J,video:O,img:F,iframe:G,blockquote:function(r){var e=r.children;return n.createElement("blockquote",null,e)},ul:function(r){var e=r.children;return n.createElement("ul",null,e)},ol:function(r){var e=r.children;return n.createElement("ol",null,e)},li:function(r){var e=r.children;return n.createElement("li",null,e)},p:function(r){var e=r.children;return n.createElement("p",null,e)},h1:function(r){var e=r.children;return n.createElement("h1",null,e)},h2:function(r){var e=r.children;return n.createElement("h2",null,e)},h3:function(r){var e=r.children;return n.createElement("h3",null,e)},h4:function(r){var e=r.children;return n.createElement("h4",null,e)},h5:function(r){var e=r.children;return n.createElement("h5",null,e)},h6:function(r){var e=r.children;return n.createElement("h6",null,e)},table:function(r){var e=r.children;return n.createElement("table",null,e)},table_head:function(r){var e=r.children;return n.createElement("thead",null,e)},table_body:function(r){var e=r.children;return n.createElement("tbody",null,e)},table_row:function(r){var e=r.children;return n.createElement("tr",null,e)},table_cell:function(r){var e=r.children;return n.createElement("td",null,e)},table_header_cell:function(r){var e=r.children;return n.createElement("th",null,e)},bold:function(r){var e=r.children;return n.createElement("b",null,e)},italic:function(r){var e=r.children;return n.createElement("i",null,e)},underline:function(r){var e=r.children;return n.createElement("u",null,e)},code:function(r){var e=r.children;return n.createElement("code",null,e)},code_block:function(r){var e=r.children;return n.createElement("pre",{style:{whiteSpace:"pre",wordWrap:"break-word",overflowX:"auto",WebkitOverflowScrolling:"touch",fontFamily:"monospace"}},e)},list_item_child:function(r){var e=r.children;return n.createElement(n.Fragment,null,e)},Asset:{audio:function(r){return n.createElement(X,Object.assign({},r,{url:r.url}))},image:function(r){return n.createElement(F,Object.assign({},r,{src:r.url}))},video:function(r){return n.createElement(O,Object.assign({},r,{src:r.url}))},font:b,application:b,model:b,text:b},embed:{},link:{}};function $(t){if(t.includes(`
`)){var r=t.split(`
`);return r.map(function(e,a){return n.createElement(n.Fragment,{key:a},e,a===r.length-1?null:n.createElement("br",null))})}return t}function ee(t){var r=t.textNode,e=t.renderers,a=t.shouldSerialize,i=r.text,c=r.bold,l=r.italic,u=r.underline,d=r.code,o=a?$(i):i,m=e==null?void 0:e.bold,f=e==null?void 0:e.italic,x=e==null?void 0:e.underline,v=e==null?void 0:e.code;return c&&m&&(o=n.createElement(m,null,o)),l&&f&&(o=n.createElement(f,null,o)),u&&x&&(o=n.createElement(x,null,o)),d&&v&&(o=n.createElement(v,null,o)),n.createElement(n.Fragment,null,o)}function te(t){return Array.isArray(t)?t:t.children}function re(t){var r=t.node,e=t.parent,a=t.renderers,i=t.references;if(S(r)){var c=r.text,l=e&&y(e)&&e.type!=="code-block";return n.createElement(ee,{textNode:g({},r,{text:c}),renderers:a,shouldSerialize:l})}return y(r)?n.createElement(ne,{element:r,renderers:a,references:i}):(r.type,n.createElement(h.Fragment,null))}function ne(t){var r=t.element,e=t.renderers,a=t.references,i=r.children,c=r.type,l=q(r,["children","type"]),u=l.nodeId,d=l.nodeType;if(c in k&&K({children:i}))return n.createElement(h.Fragment,null);var o=u&&d,m=o?a==null?void 0:a.filter(function(C){return C.id===u})[0]:null,f;if(o&&d!=="Asset"){var x,v,j=c==="link"?e==null||(x=e.link)==null?void 0:x[d]:e==null||(v=e.embed)==null?void 0:v[d];if(j!==void 0)f=j;else return console.warn("[@graphcms/rich-text-react-renderer]: No renderer found for custom "+c+" nodeType "+d+"."),n.createElement(h.Fragment,null)}if(o&&d==="Asset"){var E,N=e==null||(E=e.Asset)==null?void 0:E[m==null?void 0:m.mimeType];if(N!==void 0)f=N;else{var A,_=m==null?void 0:m.mimeType.split("/")[0];f=e==null||(A=e.Asset)==null?void 0:A[_]}}var D=o?f:e==null?void 0:e[M[c]],I=D,z=g({},l,m);return I?n.createElement(I,Object.assign({},z),n.createElement(H,{content:i,renderers:e,references:a,parent:r})):n.createElement(h.Fragment,null)}function H(t){var r=t.content,e=t.references,a=t.renderers,i=t.parent,c=te(r);return n.createElement(n.Fragment,null,c.map(function(l,u){return n.createElement(re,{node:l,parent:i||null,renderers:a,references:e,key:u})}))}function le(t){var r=t.content,e=t.renderers,a=t.references,i=g({},w==null?void 0:w.Asset,e==null?void 0:e.Asset),c=g({},w,e,{Asset:i});return n.createElement(H,{content:r,renderers:c,references:a})}const ae="https://ap-northeast-1.cdn.hygraph.com/content/clon2hia1d77l01uq1q3v0i2c/master",ie=async t=>{const r=P`
    query postContent {
      posts(
        stage: PUBLISHED
        where: {slug: "${t}"}
      ) {
        id
        title
        createdAt
        hashtag
        coverImage {
          id
          url(
            transformation: {
              document: { output: { format: webp } }
              image: { resize: { width: 400, height: 300 } }
            }
          )
        }
        content {
          json
          raw
          references {
            ... on Asset {
              id
              url(
                transformation: {
                  document: { output: { format: webp } }
                  image: { resize: { width: 400, height: 300 } }
                }
              )
              mimeType
              altText
            }
          }
        }
        category {
          name
          title
        }
      }
    }
  `;return(await W(ae,r)).posts};function ce({title:t}){return s.jsx("div",{className:"px-3 py-1 max-w-xs rounded-sm cursor-default dark:bg-blue-600 dark:text-white text-blue-600 bg-sky-100 sm:text-sm text-xs",children:t})}const he=()=>{h.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const t=T();let{slug:r}=B();const[e,a]=h.useState({isDone:!1,id:String,title:String,content:{},references:[],hashtag:[],createdAt:String,coverUrl:String,category:String}),[i,c]=h.useState([]);return h.useEffect(()=>{(async()=>{const l=await ie(r);c(l)})()},[r]),h.useEffect(()=>{i.map(l=>{var u;a({id:l==null?void 0:l.id,title:l==null?void 0:l.title,content:l==null?void 0:l.content.raw,hashtag:l==null?void 0:l.hashtag,createdAt:l==null?void 0:l.createdAt,references:l==null?void 0:l.references,category:l==null?void 0:l.category,coverUrl:((u=l.coverImage)==null?void 0:u.url)||"https://picsum.photos/seed/picsum/600",isDone:!0})})},[i]),s.jsxs("div",{className:"w-full sm:px-20 px-0 sm:mt-16 mt-12 mx-auto",children:[s.jsx("article",{className:`xl:space-y-8 space-y-4 text-gray-900 dark:text-gray-50 sm:p-6 p-4 min-h-[80vh] shadow-md shadow-gray-300 dark:shadow-none rounded-sm ${e.isDone?"dark:bg-gray-800/70 bg-white":"dark:bg-gray-800 bg-white/80 animate-pulse"}`,children:e.isDone===!0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:space-x-24 space-x-0 flex flex-col w-full",children:s.jsxs("div",{className:"flex flex-col w-full grow gap-y-3",children:[s.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[s.jsx("p",{className:"antialiased hover:subpixel-antialiased dark:bg-blue-600 dark:text-white text-blue-600 bg-blue-50 rounded-sm w-fit flex items-center justify-center text-left tracking-wide text-sm px-1.5 py-0.5",children:e.category.name}),s.jsx("p",{className:"antialiased hover:subpixel-antialiased tabular-nums text-xs text-gray-700 dark:text-gray-400",children:new Date(e.createdAt||"01/01/1970").toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),s.jsx("div",{className:"flex flex-row w-full",children:s.jsx("h1",{className:"xl:text-2xl md:text-xl sm:text-lg font-bold",children:e.title})})]})}),s.jsx("div",{className:"dark:text-gray-100 whitespace-pre-line mx-1 sm:mx-2 md:mx-4 lg:mx-6 xl:mx-8",children:Object.keys(e.content).length!==0&&s.jsx(le,{content:e.content,references:e.references,renderers:{p:({children:l})=>s.jsx("p",{className:"mb-4 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:s.jsx("span",{className:"",children:l})}),ul:({children:l})=>s.jsx("ul",{className:"list-disc list-outside ml-4 mb-4 space-y-2 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:l}),ol:({children:l})=>s.jsx("ol",{className:"list-decimal list-outside ml-4 mb-4 space-y-2 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:l}),li:({children:l})=>s.jsx("li",{className:"pl-1.5",children:l}),img:({src:l,altText:u})=>s.jsxs("figure",{className:"mx-auto my-2 sm:max-w-2xl w-full bg-white/30 dark:bg-gray-800/70",children:[s.jsx("img",{className:"object-cover bg-center aspect-video rounded bg-no-repeat sm:max-w-2xl w-full mx-auto my-2 bg-transparent",src:l,alt:u||"blog image"}),s.jsx("figcaption",{className:"bg-transparent px-5 py-1.5 text-center text-gray-900 dark:text-gray-200 text-sm italic font-medium",children:u})]})}})})]})}),s.jsxs("div",{className:"mx-2 text-sm dark:text-gray-400 lg:mt-3 lg:mb-9 mt-4 mb-28 flex flex-row space-x-2 md:space-x-4",children:[s.jsx("div",{className:"flex lg:items-center items-start justify-between sm:w-3/12 w-full py-2 dark:text-gray-400 text-gray-700 group",children:s.jsx(U,{title:"Quay lại",type:"button",onClickHandle:()=>location.pathname.includes("/recently")?t("/"):t(-1),isIcon:!0,isLoading:!1,icon:s.jsx(V,{className:"w-5 h-5 rtl:rotate-180",strokeWidth:2})})}),s.jsx("div",{className:"flex items-center flex-grow justify-end w-full space-x-2",children:e.hashtag.map(l=>s.jsx(ce,{title:l},l))})]})]})};export{he as default};
