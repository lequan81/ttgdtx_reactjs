import{g as T,R as n,r as h,j as s,a as z,b as B}from"./index-DvkixYhr.js";import{g as P,r as W}from"./index-Bfiisbut.js";import{B as U}from"./index-Cpzl7m9T.js";import{A as V}from"./ArrowLeftIcon-ClBUwz0E.js";function y(r){return r.children!==void 0}function q(r){return r.text!==void 0}function K(r){var t=r.children;if(t.length>1){var e=t.filter(function a(i){return q(i)&&i.text!==""?!0:y(i)?(i.children=i.children.filter(a)).length:!1});return!(e.length>0)}else if(t[0].text==="")return!0;return!1}var k;(function(r){r[r["heading-one"]=0]="heading-one",r[r["heading-two"]=1]="heading-two",r[r["heading-three"]=2]="heading-three",r[r["heading-four"]=3]="heading-four",r[r["heading-five"]=4]="heading-five",r[r["heading-six"]=5]="heading-six",r[r.table_head=6]="table_head"})(k||(k={}));var M={"heading-one":"h1","heading-two":"h2","heading-three":"h3","heading-four":"h4","heading-five":"h5","heading-six":"h6",class:"class",link:"a",image:"img",iframe:"iframe",video:"video","bulleted-list":"ul","numbered-list":"ol","list-item":"li","list-item-child":"list_item_child",table:"table",table_head:"table_head",table_body:"table_body",table_row:"table_row",table_cell:"table_cell",table_header_cell:"table_header_cell","block-quote":"blockquote",paragraph:"p",bold:"bold",italic:"italic",underline:"underline",code:"code","code-block":"code_block"};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var R=/["'&<>]/,Y=Q;function Q(r){var t=""+r,e=R.exec(t);if(!e)return t;var a,i="",c=0,l=0;for(c=e.index;c<t.length;c++){switch(t.charCodeAt(c)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}l!==c&&(i+=t.substring(l,c)),l=c+1,i+=a}return l!==c?i+t.substring(l,c):i}const p=T(Y);function g(){return g=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},g.apply(this,arguments)}function S(r,t){if(r==null)return{};var e={},a=Object.keys(r),i,c;for(c=0;c<a.length;c++)i=a[c],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function X(r){var t=r.url;return n.createElement("audio",{style:{display:"block",maxWidth:"100%",height:"auto"},src:t,controls:!0},n.createElement("p",null,"Your browser doesn't support HTML5 audio. Here is a"," ",n.createElement("a",{href:t},"link to the audio")," instead."))}function G(r){var t=r.url;return n.createElement("div",{style:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"}},n.createElement("iframe",{style:{position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",height:"100%"},src:p(t),loading:"lazy",allow:"fullscreen",frameBorder:"0",referrerPolicy:"no-referrer"}))}function F(r){var t=r.src,e=r.width,a=r.height,i=r.altText,c=r.title,l=e&&e>0,u=a&&a>0;return n.createElement("img",Object.assign({loading:"lazy",src:p(t)},l&&{width:e},u&&{height:a},{alt:i,title:c}))}function O(r){var t=r.src,e=r.width,a=r.height,i=r.title;return n.createElement("video",{src:p(t),controls:!0,width:e||"100%",height:a||"100%",title:i},n.createElement("p",null,"Your browser doesn't support HTML5 video. Here is a"," ",n.createElement("a",{href:t},"link to the video")," instead."))}function J(r){var t=r.className,e=r.children;return n.createElement("div",{className:t},e)}function Z(r){var t=r.children,e=S(r,["children"]),a=e.href,i=e.rel,c=e.id,l=e.title,u=e.openInNewTab,d=e.className,o={};return i&&(o.rel=i),c&&(o.id=c),l&&(o.title=l),d&&(o.className=d),u&&(o.target="_blank"),n.createElement("a",Object.assign({href:p(a)},o),t)}function b(r){return r.mimeType,n.createElement(h.Fragment,null)}var w={a:Z,class:J,video:O,img:F,iframe:G,blockquote:function(t){var e=t.children;return n.createElement("blockquote",null,e)},ul:function(t){var e=t.children;return n.createElement("ul",null,e)},ol:function(t){var e=t.children;return n.createElement("ol",null,e)},li:function(t){var e=t.children;return n.createElement("li",null,e)},p:function(t){var e=t.children;return n.createElement("p",null,e)},h1:function(t){var e=t.children;return n.createElement("h1",null,e)},h2:function(t){var e=t.children;return n.createElement("h2",null,e)},h3:function(t){var e=t.children;return n.createElement("h3",null,e)},h4:function(t){var e=t.children;return n.createElement("h4",null,e)},h5:function(t){var e=t.children;return n.createElement("h5",null,e)},h6:function(t){var e=t.children;return n.createElement("h6",null,e)},table:function(t){var e=t.children;return n.createElement("table",null,e)},table_head:function(t){var e=t.children;return n.createElement("thead",null,e)},table_body:function(t){var e=t.children;return n.createElement("tbody",null,e)},table_row:function(t){var e=t.children;return n.createElement("tr",null,e)},table_cell:function(t){var e=t.children;return n.createElement("td",null,e)},table_header_cell:function(t){var e=t.children;return n.createElement("th",null,e)},bold:function(t){var e=t.children;return n.createElement("b",null,e)},italic:function(t){var e=t.children;return n.createElement("i",null,e)},underline:function(t){var e=t.children;return n.createElement("u",null,e)},code:function(t){var e=t.children;return n.createElement("code",null,e)},code_block:function(t){var e=t.children;return n.createElement("pre",{style:{whiteSpace:"pre",wordWrap:"break-word",overflowX:"auto",WebkitOverflowScrolling:"touch",fontFamily:"monospace"}},e)},list_item_child:function(t){var e=t.children;return n.createElement(n.Fragment,null,e)},Asset:{audio:function(t){return n.createElement(X,Object.assign({},t,{url:t.url}))},image:function(t){return n.createElement(F,Object.assign({},t,{src:t.url}))},video:function(t){return n.createElement(O,Object.assign({},t,{src:t.url}))},font:b,application:b,model:b,text:b},embed:{},link:{}};function $(r){if(r.includes(`
`)){var t=r.split(`
`);return t.map(function(e,a){return n.createElement(n.Fragment,{key:a},e,a===t.length-1?null:n.createElement("br",null))})}return r}function ee(r){var t=r.textNode,e=r.renderers,a=r.shouldSerialize,i=t.text,c=t.bold,l=t.italic,u=t.underline,d=t.code,o=a?$(i):i,m=e==null?void 0:e.bold,f=e==null?void 0:e.italic,x=e==null?void 0:e.underline,v=e==null?void 0:e.code;return c&&m&&(o=n.createElement(m,null,o)),l&&f&&(o=n.createElement(f,null,o)),u&&x&&(o=n.createElement(x,null,o)),d&&v&&(o=n.createElement(v,null,o)),n.createElement(n.Fragment,null,o)}function te(r){return Array.isArray(r)?r:r.children}function re(r){var t=r.node,e=r.parent,a=r.renderers,i=r.references;if(q(t)){var c=t.text,l=e&&y(e)&&e.type!=="code-block";return n.createElement(ee,{textNode:g({},t,{text:c}),renderers:a,shouldSerialize:l})}return y(t)?n.createElement(ne,{element:t,renderers:a,references:i}):(t.type,n.createElement(h.Fragment,null))}function ne(r){var t=r.element,e=r.renderers,a=r.references,i=t.children,c=t.type,l=S(t,["children","type"]),u=l.nodeId,d=l.nodeType;if(c in k&&K({children:i}))return n.createElement(h.Fragment,null);var o=u&&d,m=o?a==null?void 0:a.filter(function(L){return L.id===u})[0]:null,f;if(o&&d!=="Asset"){var x,v,j=c==="link"?e==null||(x=e.link)==null?void 0:x[d]:e==null||(v=e.embed)==null?void 0:v[d];if(j!==void 0)f=j;else return console.warn("[@graphcms/rich-text-react-renderer]: No renderer found for custom "+c+" nodeType "+d+"."),n.createElement(h.Fragment,null)}if(o&&d==="Asset"){var E,N=e==null||(E=e.Asset)==null?void 0:E[m==null?void 0:m.mimeType];if(N!==void 0)f=N;else{var A,_=m==null?void 0:m.mimeType.split("/")[0];f=e==null||(A=e.Asset)==null?void 0:A[_]}}var D=o?f:e==null?void 0:e[M[c]],I=D,C=g({},l,m);return I?n.createElement(I,Object.assign({},C),n.createElement(H,{content:i,renderers:e,references:a,parent:t})):n.createElement(h.Fragment,null)}function H(r){var t=r.content,e=r.references,a=r.renderers,i=r.parent,c=te(t);return n.createElement(n.Fragment,null,c.map(function(l,u){return n.createElement(re,{node:l,parent:i||null,renderers:a,references:e,key:u})}))}function le(r){var t=r.content,e=r.renderers,a=r.references,i=g({},w==null?void 0:w.Asset,e==null?void 0:e.Asset),c=g({},w,e,{Asset:i});return n.createElement(H,{content:t,renderers:c,references:a})}const ae="https://ap-northeast-1.cdn.hygraph.com/content/clon2hia1d77l01uq1q3v0i2c/master",ie=async r=>{const t=P`
    query postContent {
      posts(
        stage: PUBLISHED
        where: {slug: "${r}"}
      ) {
        id
        title
        createdAt
        hashtag
        coverImage {
          id
          url(
            transformation: {
              document: { output: { format: webp } }
              image: { resize: { width: 400, height: 300 } }
            }
          )
        }
        content {
          json
          raw
          references {
            ... on Asset {
              id
              url(
                transformation: {
                  document: { output: { format: webp } }
                  image: { resize: { width: 400, height: 300 } }
                }
              )
              mimeType
              altText
            }
          }
        }
        category {
          name
          title
        }
      }
    }
  `;return(await W(ae,t)).posts};function ce({title:r}){return s.jsx("div",{"data-nosnippet":!0,className:"px-3 py-1 max-w-xs rounded-sm cursor-default dark:bg-blue-600 dark:text-white text-blue-600 bg-sky-100 sm:text-sm text-xs",children:r})}const he=()=>{h.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const r=z();let{slug:t}=B();const[e,a]=h.useState({isDone:!1,id:String,title:String,content:{},references:[],hashtag:[],createdAt:String,coverUrl:String,category:String}),[i,c]=h.useState([]);return h.useEffect(()=>{(async()=>{const l=await ie(t);c(l)})()},[t]),h.useEffect(()=>{i.map(l=>{var u;a({id:l==null?void 0:l.id,title:l==null?void 0:l.title,content:l==null?void 0:l.content.raw,hashtag:l==null?void 0:l.hashtag,createdAt:l==null?void 0:l.createdAt,references:l==null?void 0:l.references,category:l==null?void 0:l.category,coverUrl:((u=l.coverImage)==null?void 0:u.url)||"https://picsum.photos/seed/picsum/600",isDone:!0})})},[i]),s.jsxs("div",{className:"w-full max-w-4xl px-0 sm:mt-16 mt-12 mx-auto",children:[s.jsx("article",{className:`xl:space-y-8 space-y-4 text-gray-900 dark:text-gray-50 sm:p-6 p-4 min-h-[80vh] shadow-md shadow-gray-300 dark:shadow-none rounded-sm ${e.isDone?"dark:bg-gray-800/70 bg-white":"dark:bg-gray-800 bg-white/80 animate-pulse"}`,children:e.isDone===!0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:space-x-24 space-x-0 flex flex-col w-full",children:s.jsxs("div",{className:"flex flex-col w-full grow gap-y-3",children:[s.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[s.jsx("p",{className:"antialiased hover:subpixel-antialiased dark:bg-blue-600 dark:text-white text-blue-600 bg-blue-50 rounded-sm w-fit flex items-center justify-center text-left tracking-wide text-sm px-1.5 py-0.5",children:e.category.name}),s.jsx("p",{className:"antialiased hover:subpixel-antialiased tabular-nums text-xs text-gray-700 dark:text-gray-400",children:new Date(e.createdAt||"01/01/1970").toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),s.jsx("div",{className:"flex flex-row w-full",children:s.jsx("h1",{className:"xl:text-2xl md:text-xl sm:text-lg font-bold",children:e.title})})]})}),s.jsx("div",{className:"dark:text-gray-100 whitespace-pre-line",children:Object.keys(e.content).length!==0&&s.jsx(le,{content:e.content,references:e.references,renderers:{p:({children:l})=>s.jsx("p",{className:"mb-4 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:s.jsx("span",{className:"",children:l})}),ul:({children:l})=>s.jsx("ul",{className:"list-disc list-outside ml-4 mb-4 space-y-2 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:l}),ol:({children:l})=>s.jsx("ol",{className:"list-decimal list-outside ml-4 mb-4 space-y-2 antialiased hover:subpixel-antialiased text-gray-900 dark:text-white text-sm xl:text-base",children:l}),li:({children:l})=>s.jsx("li",{className:"pl-1.5",children:l}),img:({src:l,altText:u})=>s.jsxs("figure",{className:"mx-auto my-2 max-w-2xl",children:[s.jsx("img",{className:"object-cover bg-center aspect-video rounded bg-no-repeat w-full mx-auto",src:l,alt:u||"blog image"}),s.jsx("figcaption",{className:"px-5 py-1.5 text-center text-gray-700 dark:text-gray-300 text-xs italic font-medium",children:u})]})}})})]})}),s.jsxs("div",{className:"mx-2 text-sm dark:text-gray-400 lg:mt-3 lg:mb-9 mt-4 mb-28 flex flex-row space-x-2 md:space-x-4",children:[s.jsx("div",{className:"flex lg:items-center items-start justify-between sm:w-3/12 w-full py-2 dark:text-gray-400 text-gray-700 group",children:s.jsx(U,{title:"Quay lại",type:"button",onClickHandle:()=>r(-1),isIcon:!0,isLoading:!1,icon:s.jsx(V,{className:"w-5 h-5 rtl:rotate-180",strokeWidth:2})})}),s.jsx("div",{className:"flex items-center flex-grow justify-end w-full space-x-2",children:e.hashtag.map(l=>s.jsx(ce,{title:l},l))})]})]})};export{he as default};
