import{j as e,a as b,r as m}from"./index-CAmOHGhP.js";import{X as k,I as u,v as N,T as n}from"./validate-gKAiAUOM.js";import{B as y}from"./index-Bn3UHEsI.js";import{A as v}from"./ArrowLeftIcon-BYNSpfYz.js";import"./CheckCircleIcon-CbcP7H8w.js";function w({title:t,markSem1:s,markSem2:a,markRetake:l,avgYear:i}){return e.jsxs("tr",{className:"even:bg-gray-100 dark:even:bg-gray-800/50",children:[e.jsx("td",{className:"sm:px-4 pl-1.5 py-4 text-sm font-medium whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h2",{className:"font-medium text-gray-800 dark:text-white ",children:t})})}),e.jsx("td",{className:"sm:pl-0 sm:pr-12 px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 dark:text-gray-200",children:s!==-1?s:"-"})})}),e.jsx("td",{className:"sm:px-8 px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 dark:text-gray-200",children:a!==-1?a:"-"})})}),e.jsx("td",{className:"sm:px-8 px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 dark:text-gray-200",children:l!==-1?l:"-"})})}),e.jsx("td",{className:"sm:px-8 px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 dark:text-gray-200",children:i!==-1?i:"-"})})})]})}function T({data:t}){const s=b();return e.jsx("div",{className:"container sm:px-4 px-0 mx-auto",children:e.jsx("div",{className:"flex flex-col mt-6 items-center mb-10",children:e.jsx("div",{className:"-my-2 overflow-x-auto lg:-mx-6",children:t!==void 0?e.jsxs("div",{className:"inline-block xl:w-fit lg:w-20 w-[22rem] py-2 align-middle mb-16 sm:mb-2",children:[e.jsx("div",{className:"sm:overflow-hidden overflow-y-scroll md:rounded-lg border border-gray-400 dark:border-gray-700",children:e.jsxs("table",{className:"table-auto max-w-full divide-y divide-gray-300 dark:divide-gray-700",children:[e.jsxs("caption",{className:"p-3 text-left rtl:text-right bg-white dark:bg-gray-900",children:[e.jsx("h2",{className:" font-medium text-gray-800 dark:text-white",children:t.studentName||"Không tìm thấy tên"}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased mt-0.5 text-sm text-gray-700 dark:text-gray-300",children:["STT: "+t.studentId||"_",e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[" ","- ","Lớp: "+t.studentClass||"Không tìm thấy lớp"]})]})]}),e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 sm:px-4 pl-1.5 text-sm font-normal text-left rtl:text-right text-gray-700 dark:text-gray-400",children:"Tên môn học"}),e.jsx("th",{scope:"col",className:"py-3.5 sm:pl-0 sm:pr-12 px-4 text-sm font-normal text-left rtl:text-right text-gray-700 dark:text-gray-400",children:"Kỳ I"}),e.jsx("th",{scope:"col",className:"py-3.5 sm:px-8 px-4 text-sm font-normal text-left rtl:text-right text-gray-700 dark:text-gray-400",children:"Kỳ II"}),e.jsx("th",{scope:"col",className:"py-3.5 sm:px-8 px-4 text-sm font-normal text-left rtl:text-right text-gray-700 dark:text-gray-400",children:"Thi lại"}),e.jsx("th",{scope:"col",className:"py-3.5 sm:px-8 px-4 text-sm font-normal text-left rtl:text-right text-gray-700 dark:text-gray-400",children:"Cả năm"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-300 dark:divide-gray-700 dark:bg-gray-900",children:t.grades.map(a=>e.jsx(w,{title:a.subject,markSem1:a.markSem1,markSem2:a.markSem2,markRetake:a.markRetake,avgYear:a.avgYear},a.subject))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{className:"hidden lg:flex flex-row gap-x-16",children:[e.jsxs("td",{className:"py-3.5 pl-2 text-left float-left flex flex-col gap-y-4",children:[e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["TB HK I: ",e.jsx("span",{className:"sm:inline block float-right font-semibold text-gray-900 dark:text-gray-100 sm:text-sm",children:t.overall[0].avgSem1!==-1?t.overall[0].avgSem1:" -"})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["TB HK II: ",e.jsx("span",{className:"sm:inline block font-semibold float-right text-gray-900 dark:text-gray-100 sm:text-sm",children:t.overall[1].avgSem2!==-1?t.overall[1].avgSem2:" -"})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["TB năm: ",e.jsx("span",{className:"sm:inline block font-semibold float-right text-gray-900 dark:text-gray-100 sm:text-sm",children:t.overall[2].allYear!==-1?t.overall[2].allYear:" -"})]})]}),e.jsxs("td",{className:"py-3.5 text-left float-left flex flex-col gap-y-4",children:[e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["Hạnh kiểm:",e.jsxs("span",{className:"sm:inline block font-semibold text-gray-900 dark:text-gray-100 sm:text-sm",children:[t.status[0].conduct.toString().trim().toLowerCase()==="t"&&" Tốt",t.status[0].conduct.toString().trim().toLowerCase()==="k"&&" Khá",t.status[0].conduct.toString().trim().toLowerCase()==="tb"&&" Trung bình",t.status[0].conduct.toString().trim().toLowerCase()==="y"&&" Yếu",t.status[0].conduct===-1&&" -"]})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["Học lực:",e.jsxs("span",{className:"sm:inline block font-semibold text-gray-900 dark:text-gray-100 sm:text-sm",children:[t.status[0].capacity.toString().trim().toLowerCase()==="tb"&&" Trung bình",t.status[0].capacity.toString().trim().toLowerCase()==="k"&&" Khá",t.status[0].capacity.toString().trim().toLowerCase()==="y"&&" Yếu",t.status[0].capacity.toString().trim().toLowerCase()==="g"&&" Giỏi",t.status[0].capacity===-1&&" -"]})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 sm:text-sm",children:["Tình trạng:",e.jsxs("span",{className:`sm:inline block sm:px-3 px-1 sm:py-1 py-0.5 sm:ml-4 ml-0 sm:mt-0 mt-2 font-semibold text-xs sm:text-sm rounded-sm dark:bg-gray-800 ${t.isGraduated?"text-emerald-500 bg-emerald-100/60":"text-red-500 bg-red-100/60"}`,children:[t.notes===2&&"Đủ ĐK thi Tốt nghiệp THPT",t.notes===1&&"Được lên lớp",t.notes===0&&"Đang chờ xét duyệt",t.notes===-1&&"Ở lại lớp",t.notes===-2&&"Không đủ ĐK thi Tốt nghiệp THPT"]})]})]})]}),e.jsxs("tr",{className:"lg:hidden",children:[e.jsxs("td",{className:"py-3.5 pl-1.5 whitespace-nowrap text-left float-left flex flex-col gap-y-2",children:[e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["TB HK I: ",e.jsx("span",{className:"font-semibold float-right text-gray-900 dark:text-gray-100 text-xs",children:t.overall[0].avgSem1!==-1?t.overall[0].avgSem1:" -"})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["TB HK II: ",e.jsx("span",{className:"font-semibold float-right text-gray-900 dark:text-gray-100 text-xs",children:t.overall[1].avgSem2!==-1?t.overall[1].avgSem2:" -"})]}),e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["TB năm: ",e.jsx("span",{className:"font-semibold float-right text-gray-900 dark:text-gray-100 text-xs",children:t.overall[2].allYear!==-1?t.overall[2].allYear:" -"})]})]}),e.jsxs("td",{className:"py-3.5 pl-1.5 whitespace-nowrap text-left float-left flex flex-col gap-y-2",children:[e.jsx("div",{className:"flex flex-row",children:e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["Hạnh kiểm:",e.jsxs("span",{className:"inline font-semibold text-gray-900 dark:text-gray-100 text-xs",children:[t.status[0].conduct.toString().trim().toLowerCase()==="t"&&" Tốt",t.status[0].conduct.toString().trim().toLowerCase()==="k"&&" Khá",t.status[0].conduct.toString().trim().toLowerCase()==="tb"&&" Trung bình",t.status[0].conduct.toString().trim().toLowerCase()==="y"&&" Yếu",t.status[0].conduct===-1&&" -"]})]})}),e.jsx("div",{className:"flex flex-row",children:e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["Học lực:",e.jsxs("span",{className:"inline font-semibold text-gray-900 dark:text-gray-100 text-xs",children:[t.status[0].capacity.toString().trim().toLowerCase()==="tb"&&" Trung bình",t.status[0].capacity.toString().trim().toLowerCase()==="k"&&" Khá",t.status[0].capacity.toString().trim().toLowerCase()==="y"&&" Yếu",t.status[0].capacity.toString().trim().toLowerCase()==="g"&&" Giỏi",t.status[0].capacity===-1&&" -"]})]})}),e.jsx("div",{className:"flex flex-row",children:e.jsxs("p",{className:"antialiased hover:subpixel-antialiased font-normal text-gray-700 dark:text-gray-300 text-xs",children:["Tình trạng:",e.jsxs("span",{className:`block px-1.5 mt-2 font-medium text-xs sm:rounded-2xl rounded-sm dark:bg-gray-800 ${t.isGraduated?"text-emerald-500 bg-emerald-100/60":"text-red-500 bg-red-100/60"}`,children:[t.notes===2&&"Được thi Tốt nghiệp THPT",t.notes===1&&"Được lên lớp",t.notes===0&&"Đang chờ xét duyệt",t.notes===-1&&"Ở lại lớp",t.notes===-2&&"Không được thi Tốt nghiệp THPT"]})]})})]})]})]})]})}),e.jsx("div",{className:"flex items-center justify-start sm:w-3/12 w-full py-2 dark:text-gray-400 text-gray-700 group mt-2.5",children:e.jsx(y,{title:"Quay lại",type:"button",onClickHandle:()=>s(0),isIcon:!0,isLoading:!1,icon:e.jsx(v,{className:"w-5 h-5 rtl:rotate-180",strokeWidth:2})})})]}):e.jsx("div",{className:"flex items-center mt-6 text-center border rounded-lg h-fit dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col w-full px-4 py-8 mx-auto",children:[e.jsx("div",{className:"p-1.5 sm:p-2 mx-auto text-red-500 bg-red-100 rounded-full dark:bg-gray-800",children:e.jsx(k,{strokeWidth:2,fill:"none",stroke:"currentColor",className:"sm:w-8 sm:h-8 h-7 w-7"})}),e.jsx("h1",{className:"mt-3 text-lg text-gray-800 dark:text-white",children:"Không tìm thấy dữ liệu!"}),e.jsx("p",{className:"antialiased hover:subpixel-antialiased mt-2 text-gray-700 dark:text-gray-400",children:"Vui lòng kiểm tra lại tên lớp và số thứ tự trong lớp của bạn"})]})})})})})}const S="https://tar-ionized-ground.glitch.me/gradeList",I=async t=>window.navigator.onLine?await V(t.className,t.studentId):-5;async function V(t,s){try{const a=await fetch(`${S}?classes=${t}`);if(!a.ok)return-5;const l=await a.json();if(l[0]===void 0||l[0].classes===void 0)return-3;for(let i=0;i<l[0].data.length;i++){const o=l[0].data[i];if(o.studentId===Number(s))return o}return-4}catch{return-5}}function H(){const[t,s]=m.useState({classNameErr:{isValid:!0,message:""},studentIdErr:{isValid:!0,message:""}}),[a,l]=m.useState({}),[i,o]=m.useState({studentId:"",className:""}),[g,c]=m.useState(!1),[h,f]=m.useState(!1),p=x=>{o(r=>({...r,[x.target.name]:x.target.value})),s(r=>({...r,[`${x.target.name}Err`]:{isValid:!0,message:""}}))},d=x=>{switch(x){case 0:{s({classNameErr:{isValid:!0,message:""},studentIdErr:{isValid:!0,message:""}});break}case-1:{s({classNameErr:{isValid:!1,message:`Tên lớp không hợp lệ.
 Vui lòng thử lại`},studentIdErr:{isValid:!1,message:`Số thứ tự không hợp lệ. 
 Vui lòng thử lại`}}),n("error","Có lỗi xảy ra. Vui lòng thử lại");break}case-2:{s({classNameErr:{isValid:!1,message:`Tên lớp không hợp lệ.
 Vui lòng thử lại`},studentIdErr:{isValid:!0,message:""}}),n("warning","Tên lớp không hợp lệ. Vui lòng thử lại");break}case-3:{s({classNameErr:{isValid:!1,message:`Tên lớp không tồn tại. 
 Vui lòng thử lại`},studentIdErr:{isValid:!0,message:""}}),n("error","Tên lớp không tồn tại. Vui lòng thử lại");break}case-4:{s({classNameErr:{isValid:!0,message:"Tên lớp hợp lệ"},studentIdErr:{isValid:!1,message:`Số thứ tự không hợp lệ. 
 Vui lòng thử lại`}}),n("warning","Số thứ tự không hợp lệ. Vui lòng thử lại");break}case-5:{s({classNameErr:{isValid:!0,message:""},studentIdErr:{isValid:!0,message:""}}),n("error","Lỗi kết nối tới server"),setTimeout(()=>{n("info","Vui lòng kiểm tra kết nối Internet và thử lại")},1500);break}}},j=x=>{x.preventDefault(),d(0),c(!0);let r=N(i);typeof r=="number"?(c(!1),d(r)):(async()=>(n("info","Vui lòng đợi..."),r=await I(i),typeof r=="number"?(c(!1),d(r)):(l(r),f(!0),d(0),c(!1),n("success","Đã tải xong"))))()};return e.jsxs("section",{className:"flex flex-col flex-grow h-full items-center justify-start bg-gray-100 dark:bg-gray-900 w-full mt-12",children:[e.jsxs("div",{className:"flex items-center justify-center flex-col",children:[e.jsx("h1",{className:"text-center text-blue-600 dark:text-white sm:text-xl lg:text-lg md:text-base uppercase font-bold mb-2 mt-4 whitespace-pre-line sm:whitespace-normal animate__animated animate__zoomIn animate__faster",children:"Tra cứu điểm thi"}),e.jsx("p",{className:"antialiased hover:subpixel-antialiased text-center leading-relaxed sm:text-lg md:text-base text-sm text-gray-800 dark:text-gray-200 animate__animated animate__fadeIn",children:h===!1?"Vui lòng nhập tên lớp và số thứ tự trong lớp của bạn":"Bảng điểm các môn"})]}),h===!1&&e.jsx("form",{onSubmit:j,className:"animate__animated animate__zoomIn animate__fast shadow-md transition-shadow shadow-gray-300 dark:shadow-none sm:rounded px-6 mt-10 sm:mt-4 py-6 justify-center bg-white dark:bg-gray-800 border border-gray-300 dark:border-none flex flex-row max-w-3xl",children:e.jsxs("div",{className:"relative flex sm:flex-row flex-col items-start w-full",children:[e.jsx("div",{className:"sm:w-2/6 px-3 h-28",children:e.jsx(u,{isLoading:g,id:"className",title:"Tên lớp",isRequired:!0,type:"text",placeholder:"12A1",handleChange:p,status:t.classNameErr})}),e.jsx("div",{className:"sm:w-2/6 px-3 h-28",children:e.jsx(u,{isLoading:g,id:"studentId",title:"Số thứ tự",isRequired:!0,type:"text",placeholder:"26",handleChange:p,status:t.studentIdErr})}),e.jsx("div",{className:"sm:w-1/6 mx-auto w-full flex lg:grow flex-grow-0 flex-row items-center justify-center sm:h-24 h-fit mt-1",children:e.jsx(y,{title:"Tra cứu",type:"submit",isLoading:g})})]})}),h===!0&&e.jsx(T,{data:a})]})}export{H as default};
